# Function to read in mcd files to python# import necessary librariesimport neuroshare as nsimport osimport statisticsimport pickleimport numpy as npimport shelveimport scipy as spimport mathimport decimalfrom scipy import fftpack, signal, statsfrom scipy.fftpack import rfft, irfft, fftfreqimport matplotlibimport matplotlib.pyplot as pltimport pandas as pdfrom data.data_functions import *from datasets.chemical_dataset import ChemicalDatasetMCDFolderPath = "/Volumes/BACKUP/EXTRAP/FP_SPIKE"MCDFilePath = "/Volumes/BACKUP/EXTRAP/FP_SPIKE/ACE/June_04_2014_20613_ACE/060414_20613_ACE_FPSPK.mcd"MCDexampleFile = "/Users/dh2744/Dropbox/Documents/Software/Python/LFP_project/nsMCDLibrary_MacOSX_3.7b/ExampleMCD/NeuroshareExample.mcd"def run_one_chemical(chem="bic", save=True ):    save_pickle = False    info = dict()    info[chem] = dict()    files = get_files(chem)    for f in files:        print(f)        title = '_'.join( ( f.split(".mcd")[0].split("_")[  (len(f.split(".mcd")[0].split("_"))-3):] ) )        info[chem][title]=MCD_read(f)    if save:        cur_dataset = ChemicalDataset(chemical_name=chem )        for name, df in info[chem].items():            cur_dataset.add_dataframe(name, df)        # os.mkdir(os.path.abspath('./saved_data'))        info[chem].save(os.path.abspath('./saved_data'))    if save_pickle:        filename="/Volumes/BACKUP/EXTRAP/LFP_processed/pickle_{chem_name}.pkl".format(chem_name=chem)        with open(filename, 'wb') as f:  # Python 3: open(..., 'wb')            pickle.dump(info, f)    return inforun_one_chemical('bic', save=True)run_one_chemical('ace', save=True)run_one_chemical('gly', save=True)run_one_chemical('dom', save=True)run_one_chemical('dmso', save=True)run_one_chemical('per50', save=True)run_one_chemical('per25', save=True)run_one_chemical('lin1', save=True)run_one_chemical('lin10', save=True)run_one_chemical('car5', save=True)run_one_chemical('car30', save=True)run_one_chemical('h2o', save=True)